<div class="container">
  
  <div class="button">
    <button mat-raised-button color="primary" (click)="vuSwitch()">vuSwitch</button>
    <button mat-raised-button color="primary" *ngIf="isAdmin()" (click)="openArticleModal(null,'article')">add new article</button>
    <button mat-raised-button color="primary" *ngIf="isAdmin()" (click)="openArticleModal(null,'articleFromExistProvider')">add new article from exist provider</button>
  </div>
  <div *ngIf=" (articles | async) as articles">
    <div *ngIf="table">
      <table>
        <thead>
          <tr>
            <th>libelle</th>
            <th> code </th>
            <th>cost</th>
            <th>quantity</th>
            <th>sellingPrice</th>
            <th>discription</th>
            <th>minQuantity</th>
            <th>barcode</th>
            <th>tva</th>
            <th>category</th>
          <th>sous category</th>
            <th>img</th>
            <th *ngIf="loginService.isAdmin">Actions</th> <!-- Add new table header for Actions -->
          </tr>
        </thead>
        <tbody *ngIf="articles.length > 0 ">
          <tr *ngFor="let article of articles; index as i">
            <td>{{article.article.libelle}}</td>
            <td>{{article.article.code}}</td>
            <td>{{article.article.cost}}</td>
            <td>{{article.quantity}}</td>
            <td>{{article.article.cost*article.article.margin}}</td>
            <td>{{article.article.discription}}</td>
            <td>{{article.article.minQuantity}}</td>
            <td>{{article.article.barcode}}</td>
            <td>{{article.article.tva/100|percent}}</td>
            <td *ngIf="article.article.category">{{article.article.category.libelle}}</td>
            <td *ngIf="!article.article.category">without category</td>
            <td *ngIf="article.article.subCategory">{{article.article.subCategory.libelle}}</td>
            <td *ngIf="!article.article.subCategory">without sous category</td>
            <img src="http://localhost:8080/werehouse/image/{{article.article.image}}/article/{{article.article.provider.company.user.username}}" alt="download">
            <td *ngIf="loginService.isAdmin"> 
              <mat-icon color="warn" style="font-size: 24px;"   (click)="deleteArticleServer( article.article.libelle,article.id)">delete</mat-icon>
              <mat-icon color="accent" style="font-size: 24px;" (click)="updateArticleServer(article)">update</mat-icon>
              <mat-icon color="accent" style="font-size: 24px;" (click)="addQuantity(article)">add</mat-icon>


            </td>

          </tr>
        </tbody>
      </table>
    </div>
    <div class="card" *ngIf="!table"  >
      <div *ngFor="let article of articles" class="article popup" [attr.data-libelle]="'libelle: '+article.article.libelle"
                                 [attr.data-code]="'code: '+article.article.code"
                                 [attr.data-cost]="'cost: '+article.article.cost"
                                 [attr.data-qte]="'quantity: '+article.quantity"
                                 [attr.data-selling]="'price: '+article.article.cost*article.article.margin"
                                 [attr.data-tva]="'tva: '+article.article.tva+'%'"
                                 [attr.data-minqte]="'min quantity: '+article.article.minQuantity"
                                 [attr.data-barcode]="'barcode: '+article.article.barcode"
                                 [attr.data-disc]="'discription: '+article.article.discription"
                                  >
        <div class="articlei" >
          <div class="image">
             <img *ngIf="article.article.image" class="img" src="http://localhost:8080/werehouse/image/{{article.article.image}}/article/{{article.article.provider.company.user.username}}" alt="download">
             <p *ngIf="!article.article.image">without image</p>
          </div>
          <div class="information">
            <div class="_1">
              <p>Libelle: {{article.article.libelle}}
              <p>
              <p>Code: {{article.article.code}}
              <p>
              <p>Selling Price: {{article.article.cost*article.article.margin|currency:'Dt '}}
              <p>
            </div>
        </div>
      </div>
      <div class="button">
        
        <mat-icon color="warn" style="font-size: 24px;" class="btn1"  (click)="deleteArticleServer( article.article.libelle,article.id)">delete</mat-icon>
        <mat-icon color="accent" style="font-size: 24px;" class="btn1"  (click)="updateArticleServer(article)">update</mat-icon>
        <mat-icon color="accent" style="font-size: 24px;" class="btn1"  (click)="addQuantity(article)">add</mat-icon>
      </div>
    </div>
  </div>
</div>